# dnsmasq configuration for ReViision Test Bench
# DHCP and DNS server for WiFi hotspot

# Interface to bind to
interface=wlan0

# Never forward plain names (without a dot or domain part)
domain-needed

# Never forward addresses in the non-routed address spaces
bogus-priv

# Don't read /etc/resolv.conf
no-resolv

# Don't read /etc/hosts
no-hosts

# Add local-only domains here
local=/testbench.local/

# Set the domain for dnsmasq
domain=testbench.local

# Expand simple names
expand-hosts

# DHCP range
dhcp-range=192.168.4.2,192.168.4.20,255.255.255.0,24h

# Router (gateway) advertisement
dhcp-option=option:router,192.168.4.1

# DNS servers
dhcp-option=option:dns-server,192.168.4.1,8.8.8.8,8.8.4.4

# Enable DHCP logging
log-dhcp

# Cache size
cache-size=1000

# Static DHCP assignments for known devices
# Tapo C220 Camera (if MAC is known)
# dhcp-host=XX:XX:XX:XX:XX:XX,192.168.4.15,tapo-c220,infinite

# Windows Computer (ReViision Server)
# dhcp-host=YY:YY:YY:YY:YY:YY,192.168.4.10,reviision-server,infinite

# Local domain mappings
address=/testbench.local/192.168.4.1
address=/pi.testbench.local/192.168.4.1
address=/camera.testbench.local/192.168.4.15
address=/server.testbench.local/192.168.4.10

# Enable IPv6 if needed (uncomment if required)
# enable-ra

# Prevent dnsmasq from forwarding to upstream DNS for private networks
server=8.8.8.8
server=8.8.4.4

# Log queries (for debugging)
# log-queries

# Quiet DHCP logging (comment out if you want detailed logs)
# quiet-dhcp 